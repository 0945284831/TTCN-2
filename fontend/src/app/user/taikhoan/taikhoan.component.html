<div class="w-75 p-3 mx-auto">
    <div *ngIf="userId">
     
      <div class="row">
        <div class="col-md-4">
          <div class="vertical-tabs">
            <h2>TRANG TÀI KHOẢN</h2>
            <b>Xin chào,</b><b style="color:red" *ngIf="user"> {{ user.name }} </b><b>!</b>
            <p></p> 
           
            <div>
                <a (click)="showInfo()" [class.selected]="selectedTab === 'info'">Thông tin tài khoản</a>
            </div>
            <div>
                <a (click)="showOrders()" [class.selected]="selectedTab === 'orders'">Đơn hàng của bạn</a>
            </div>
            <div>
                <a (click)="showAddress()" [class.selected]="selectedTab === 'address'" *ngIf="user">Sổ địa chỉ ({{ user.contactInfo.length }})</a>
            </div>
          </div>
        </div>
      
        <div class="col-md-8">
          <div class="content">
            <!-- Content for the selected tab -->
            <div *ngIf="selectedTab === 'info'">
                <h2>THÔNG TIN TÀI KHOẢN</h2>
                <p></p>
                  <p *ngIf="user"><strong>Email:</strong> {{ user.email }}</p>
                  <p *ngIf="user"><strong>Số Điện Thoại:</strong> {{ user.phone }}</p>
                  <p *ngIf="user"><strong>Họ và Tên:</strong> {{ user.name }}</p>
            </div>
      
            <div *ngIf="selectedTab === 'orders'">
              <!-- Content for Đơn hàng của bạn -->
            </div>
      
            <div *ngIf="selectedTab === 'address'">
                <h2>ĐỊA CHỈ CỦA BẠN</h2>
                <button (click)="showDialog()" icon="pi pi-external-link" class="btn" style=" background-color: #CC7F45; color: aliceblue;">Thêm địa chỉ</button>

                <p></p>
                <br>
                <div *ngIf="contactInfo">
                <p><strong>Họ và Tên:</strong> {{ contactInfo.fullName }}</p>
                <p><strong>Địa chỉ:</strong> {{ contactInfo.address }}, {{ contactInfo.ward }}, {{ contactInfo.district }}, {{ contactInfo.province }}, {{ contactInfo.country }}</p>
                <p><strong>Số điện thoại:</strong> {{ contactInfo.phone }}</p>
              </div>
              <div *ngIf="!contactInfo">
                <p>No contact information available.</p>
              </div>
              </div>              
          </div>
        </div>
      </div>      
    </div>
  </div>
  <p-dialog header="THÊM ĐỊA CHỈ MỚI" [(visible)]="visible" [modal]="true" [style]="{ width: '60vw' }" [draggable]="false" [resizable]="false">
    <form [formGroup]="addressForm" (ngSubmit)="onSubmit()" class="container mt-3" *ngIf="contactInfo">
      <div class="row">
        <div class="col-md-12 mt-3">
          <input type="text" id="fullName" formControlName="fullName" [(ngModel)]="contactInfo.fullName" class="form-control" placeholder="Họ và tên">
        </div>
        <div class="col-md-12 mt-3">
          <input type="text" id="phone" formControlName="phone" [(ngModel)]="contactInfo.phone" class="form-control" placeholder="Số điện thoại">
        </div>
        <div class="col-md-12 mt-3">
          <input type="text" id="address" formControlName="address" [(ngModel)]="contactInfo.address" class="form-control" placeholder="Địa chỉ">
        </div>
      </div>
    
      <div class="row">
        <div class="col-md-4 mt-3">
          <select id="province" formControlName="province" [(ngModel)]="selectedProvince" (change)="onProvinceChange()" class="form-control">
            <option value="">Chọn Tỉnh/Thành phố</option>
            <option *ngFor="let province of provinces" [value]="province.code">{{ province.name }}</option>
          </select>
        </div>
        <div class="col-md-4 mt-3" [ngClass]="{ 'faded': !provinceSelected }">
          <select id="district" formControlName="district" [(ngModel)]="selectedDistrict" (change)="onDistrictChange()" class="form-control">
            <option value="">Chọn Quận/Huyện</option>
            <option *ngFor="let district of districts" [value]="district.code">{{ district.name }}</option>
          </select>
        </div>
        <div class="col-md-4 mt-3" [ngClass]="{ 'faded': !districtSelected }">
          <select id="ward" formControlName="ward" [(ngModel)]="selectedWard" class="form-control">
            <option value="">Chọn Phường/Xã</option>
            <option *ngFor="let ward of wards" [value]="ward.name">{{ ward.name }}</option>
          </select>
        </div>
      </div>
      
      
      
      
      
    
      <div class="row">
        <div class="col-md-12 mt-3">
          <input type="text" id="zipCode" formControlName="zipCode" [(ngModel)]="contactInfo.zipCode" class="form-control" placeholder="Mã zip">
        </div>
        <div class="col-md-12 mt-3">
          <div class="form-check">
            <input type="radio" id="isDefault" formControlName="isDefault" [(ngModel)]="contactInfo.isDefault" class="form-check-input">
            <label for="isDefault" class="form-check-label">Đặt là địa chỉ mặc định?</label>
          </div>
        </div>
        <div class="col-md-12 mt-3">
          <button type="submit" class="btn  col-md-12" style=" background-color: #CC7F45;
          color: aliceblue;">Submit</button>
        </div>
      </div>
    </form>
    
    
  </p-dialog>
  